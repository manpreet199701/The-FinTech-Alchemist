// Homepage Interactive Enhancements
document.addEventListener('DOMContentLoaded', function() {
    
    // Smooth scrolling for anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        });
    });
    
    // Intersection Observer for scroll animations
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    };
    
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('animate-in');
            }
        });
    }, observerOptions);
    
    // Observe elements for animations
    const animateElements = document.querySelectorAll('.section-header, .project-card, .timeline-item, .blog-card');
    animateElements.forEach(el => {
        el.style.opacity = '0';\n        el.style.transform = 'translateY(30px)';\n        el.style.transition = 'opacity 0.6s ease, transform 0.6s ease';\n        observer.observe(el);\n    });\n    \n    // Add CSS for animation\n    const style = document.createElement('style');\n    style.textContent = `\n        .animate-in {\n            opacity: 1 !important;\n            transform: translateY(0) !important;\n        }\n    `;\n    document.head.appendChild(style);\n    \n    // Hero stats counter animation\n    const statsNumbers = document.querySelectorAll('.stat-number');\n    const animateCounter = (element, target) => {\n        let current = 0;\n        const increment = target / 50;\n        const timer = setInterval(() => {\n            current += increment;\n            if (current >= target) {\n                element.textContent = target === Infinity ? '∞' : Math.ceil(target);\n                clearInterval(timer);\n            } else {\n                element.textContent = Math.ceil(current);\n            }\n        }, 30);\n    };\n    \n    // Trigger counter animation when hero is visible\n    const heroObserver = new IntersectionObserver((entries) => {\n        entries.forEach(entry => {\n            if (entry.isIntersecting) {\n                statsNumbers.forEach((stat, index) => {\n                    const targets = [3, 10, Infinity];\n                    if (targets[index] === Infinity) {\n                        stat.textContent = '∞';\n                    } else {\n                        animateCounter(stat, targets[index]);\n                    }\n                });\n                heroObserver.unobserve(entry.target);\n            }\n        });\n    });\n    \n    const heroSection = document.querySelector('.hero-section');\n    if (heroSection) {\n        heroObserver.observe(heroSection);\n    }\n    \n    // Skill bubble interactions\n    const skillBubbles = document.querySelectorAll('.skill-bubble');\n    skillBubbles.forEach(bubble => {\n        bubble.addEventListener('click', function() {\n            // Create ripple effect\n            const ripple = document.createElement('div');\n            ripple.style.position = 'absolute';\n            ripple.style.borderRadius = '50%';\n            ripple.style.background = 'rgba(255, 120, 172, 0.3)';\n            ripple.style.transform = 'scale(0)';\n            ripple.style.animation = 'ripple 0.6s linear';\n            ripple.style.left = '50%';\n            ripple.style.top = '50%';\n            ripple.style.width = '20px';\n            ripple.style.height = '20px';\n            ripple.style.marginLeft = '-10px';\n            ripple.style.marginTop = '-10px';\n            \n            this.style.position = 'relative';\n            this.appendChild(ripple);\n            \n            setTimeout(() => {\n                ripple.remove();\n            }, 600);\n        });\n    });\n    \n    // Add ripple animation CSS\n    const rippleStyle = document.createElement('style');\n    rippleStyle.textContent = `\n        @keyframes ripple {\n            to {\n                transform: scale(4);\n                opacity: 0;\n            }\n        }\n    `;\n    document.head.appendChild(rippleStyle);\n    \n    // Project card hover effects\n    const projectCards = document.querySelectorAll('.project-card');\n    projectCards.forEach(card => {\n        card.addEventListener('mouseenter', function() {\n            this.style.transform = 'translateY(-8px) scale(1.02)';\n        });\n        \n        card.addEventListener('mouseleave', function() {\n            this.style.transform = 'translateY(0) scale(1)';\n        });\n    });\n    \n    // Button click animations\n    const buttons = document.querySelectorAll('.btn-primary, .btn-secondary, .btn-outline, .btn-coffee');\n    buttons.forEach(button => {\n        button.addEventListener('click', function(e) {\n            // Create click animation\n            this.style.transform = 'scale(0.95)';\n            setTimeout(() => {\n                this.style.transform = '';\n            }, 150);\n        });\n    });\n    \n    // Parallax effect for hero background\n    window.addEventListener('scroll', () => {\n        const scrolled = window.pageYOffset;\n        const heroBackground = document.querySelector('.hero-background');\n        if (heroBackground) {\n            heroBackground.style.transform = `translateY(${scrolled * 0.5}px)`;\n        }\n    });\n    \n    // Coffee animation trigger\n    const coffeeAnimation = document.querySelector('.coffee-animation');\n    if (coffeeAnimation) {\n        coffeeAnimation.addEventListener('click', function() {\n            this.style.animation = 'none';\n            setTimeout(() => {\n                this.style.animation = 'coffeeFloat 1s ease-in-out';\n            }, 10);\n        });\n    }\n    \n    // Keyboard navigation improvements\n    document.addEventListener('keydown', function(e) {\n        if (e.key === 'Tab') {\n            document.body.classList.add('keyboard-navigation');\n        }\n    });\n    \n    document.addEventListener('mousedown', function() {\n        document.body.classList.remove('keyboard-navigation');\n    });\n    \n    // Enhanced focus styles\n    const focusStyle = document.createElement('style');\n    focusStyle.textContent = `\n        .keyboard-navigation *:focus {\n            outline: 2px solid var(--color-accent-highlight) !important;\n            outline-offset: 2px !important;\n        }\n    `;\n    document.head.appendChild(focusStyle);\n    \n    // Loading animation for images\n    const images = document.querySelectorAll('img');\n    images.forEach(img => {\n        img.addEventListener('load', function() {\n            this.style.opacity = '1';\n        });\n        \n        if (!img.complete) {\n            img.style.opacity = '0';\n            img.style.transition = 'opacity 0.3s ease';\n        }\n    });\n    \n    // Performance optimization: Reduce animations on slower devices\n    if (navigator.hardwareConcurrency && navigator.hardwareConcurrency < 4) {\n        document.body.classList.add('reduced-animations');\n        \n        const performanceStyle = document.createElement('style');\n        performanceStyle.textContent = `\n            .reduced-animations * {\n                animation-duration: 0.1s !important;\n                transition-duration: 0.1s !important;\n            }\n        `;\n        document.head.appendChild(performanceStyle);\n    }\n});